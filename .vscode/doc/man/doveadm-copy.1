.TH "DOVEADM-COPY" "1" "March 2025" "0a16fcf" "Dovecot"
.SH "NAME"
\fBdoveadm-copy\fR - Copy messages matching the given search query into another mailbox
.SH "SYNOPSIS"
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBmove\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-A\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBmove\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-F\fR \fIfile\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBmove\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB--no-userdb-lookup\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBmove\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-u\fR \fIuser\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBcopy\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-A\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBcopy\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-F\fR \fIfile\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBcopy\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB--no-userdb-lookup\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.P
\fBdoveadm\fR \[lB]\fIGLOBAL OPTIONS\fR\[rB] \fBcopy\fR \[lB]\fB-S\fR \fIsocket_path\fR\[rB] \fB-u\fR \fIuser\fR \fBdestination\fR \[lB]\fBuser\fR \fIsource_user\fR\[rB] \fIsearch_query\fR
.SH "DESCRIPTION"
.P
\fBdoveadm move\fR can be used for moving mails between mailboxes for one or more users. The \fIsearch_query\fR is used to restrict which messages are moved into the \fIdestination\fR mailbox.
.P
\fBdoveadm copy\fR behaves the same as \fBdoveadm move\fR, except that copied messages will not be expunged after copying.
.P
In the first form, doveadm(1) will iterate over all users, found in the configured 
.P
In the second form, doveadm(1) will iterate over all users, found in the given 
.P
In the third form, matching mails will be moved or copied only for given \fIuser\fR(s).
.SH "GLOBAL OPTIONS"
.P
Global doveadm(1) 
.P
\fB-D\fR
.RS 0
.RS 4
.P
Enables \fIverbosity\fR and debug messages.
.RE 0

.RE 0

.P
\fB-O\fR
.RS 0
.RS 4
.P
Do not read any config file, just use defaults. The \fBdovecot_storage_version\fR setting defaults to the latest version, but can be overridden with 
.RE 0

.RE 0

.P
\fB-k\fR
.RS 0
.RS 4
.P
Preserve entire environment for doveadm, not just \fBimport_environment\fR setting.
.RE 0

.RE 0

.P
\fB-v\fR
.RS 0
.RS 4
.P
Enables verbosity, including progress counter.
.RE 0

.RE 0

.P
\fB-i\fR \fIinstance-name\fR
.RS 0
.RS 4
.P
If using multiple Dovecot instances, choose the config file based on this instance name.
.P
See \fBinstance_name\fR setting for more information.
.RE 0

.RE 0

.P
\fB-c\fR \fIconfig-file\fR
.RS 0
.RS 4
.P
Read configuration from the given \fIconfig-file\fR. By default it first reads config socket, and then falls back to \fI/etc/dovecot/dovecot.conf\fR. You can also point this to config socket of some instance running compatible version.
.RE 0

.RE 0

.P
\fB-o\fR \fIsetting\fR\fB=\fR\fIvalue\fR
.RS 0
.RS 4
.P
Overrides the configuration \fIsetting\fR from \fI/etc/dovecot/dovecot.conf\fR and from the userdb with the given \fIvalue\fR. In order to override multiple settings, the \fB-o\fR option may be specified multiple times.
.RE 0

.RE 0

.SH "OPTIONS"
.P
\fB-A\fR
.RS 0
.RS 4
.P
If the \fB-A\fR option is present, the \fIcommand\fR will be performed for all users. Using this option in combination with system users from \fBuserdb { driver = passwd }\fR is not recommended, because it contains also users with a lower UID than the one configured with the \fBfirst_valid_uid\fR setting.
.P
When the SQL userdb module is used, make sure that the \fBuserdb_sql_iterate_query\fR setting setting matches your database layout.
.P
When using the LDAP userdb module, make sure that the \fBuserdb_fields\fR setting and \fBuserdb_ldap_iterate_fields\fR setting settings match your LDAP schema. Otherwise doveadm(1) will be unable to iterate over all users.
.RE 0

.RE 0

.P
\fB-F\fR \fIfile\fR
.RS 0
.RS 4
.P
Execute the \fIcommand\fR for all the users in the \fIfile\fR. This is similar to the \fB-A\fR option, but instead of getting the list of users from the userdb, they are read from the given \fIfile\fR. The \fIfile\fR contains one username per line.
.RE 0

.RE 0

.P
\fB--no-userdb-lookup\fR
.RS 0
.RS 4
.P
Do not perform userdb lookup. Use the \fBUSER\fR environment variable to specify the username.
.RE 0

.RE 0

.P
\fB-S\fR \fIsocket_path\fR
.RS 0
.RS 4
.P
The option's argument is either an absolute path to a local UNIX domain socket, or a hostname and port (\fIhostname\fR:\fIport\fR), in order to connect a remote host via a TCP socket.
.P
This allows an administrator to execute doveadm(1) mail commands through the given socket.
.RE 0

.RE 0

.P
\fB-u\fR \fIuser/mask\fR
.RS 0
.RS 4
.P
Run the \fIcommand\fR only for the given \fIuser\fR. It's also possible to use '\fB*\fR' and '\fB?\fR' wildcards (e.g. -u *@example.org).
.RE 0

.RE 0

.SH "ARGUMENTS"
.P
\fIdestination\fR
.RS 0
.RS 4
.P
The name of the destination mailbox, into which the mails should be moved or copied. The \fIdestination\fR mailbox must exist, otherwise this command will fail.
.RE 0

.RE 0

.P
\fIsearch_query\fR
.RS 0
.RS 4
.P
Move/copy messages matching the given search query. See doveadm-search-query(7) for details.
.RE 0

.RE 0

.P
\fBuser\fR \fIsource_user\fR
.RS 0
.RS 4
.P
 followed by a valid user name. When this argument is present, doveadm(1) will apply the 
.P
\fBLimitation:\fR Currently the users, specified by \fB-u\fR \fIuser\fR and \fBuser\fR \fIsource_user\fR, must share the same system UID and GID.
.RE 0

.RE 0

.SH "EXAMPLE"
.P
Move jane's messages - received in September 2011 - from her INBOX into her archive:
.P
.RS 2
.nf
doveadm move -u jane Archive/2011/09 mailbox INBOX BEFORE \[rs]
  2011-10-01 SINCE 01-Sep-2011
.fi
.RE
.SH "REPORTING BUGS"
.P
Report bugs, including \fIdoveconf -n\fR output, to the Dovecot Mailing List \fI\(ladovecot@dovecot.org\(ra\fR. Information about reporting bugs is available at: https://dovecot.org/bugreport.html
.SH "SEE ALSO"
.P
doveadm(1)
